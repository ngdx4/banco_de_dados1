PRAGMA foreing_keys = true; --ativa o foragekeys no SQLite

DROP TABLE LABORATORIO;
DROP TABLE ITEM;
DROP TABLE MEDICAMENTO;
DROP TABLE PEDIDO;
DROP TABLE CLIENTE;

CREATE TABLE CLIENTE(
  CNPJ CHAR(18),
  NOME VARCHAR(100) NOT NULL,
  ENDERECO VARCHAR(100),
  CIDADE VARCHAR(30),
  ESTADO CHAR(2),
  CEP CHAR(9),
  TELEFONE CHAR(14),
  CONTATO VARCHAR(30),
  PRIMARY KEY (CNPJ)
);
CREATE TABLE LABORATORIO(
  CODIGO INT,
  NOME VARCHAR(100),
  PRIMARY KEY (CODIGO)
);
CREATE TABLE PEDIDO(
  NUMERO INTEGER,
  DATA_PEDIDO DATE NOT NULL,
  VALOR_TOTAL NUMERIC(10,2),
  CNPJ CHAR(18) NOT NULL,
  PRIMARY KEY (NUMERO AUTOINCREMENT),
  FOREIGN KEY (CNPJ) REFERENCES CLIENTE(CNPJ)
);

CREATE TABLE MEDICAMENTO(
  CODIGO INTEGER,
  TIPO CHAR(1) not NULL CHECK(TIPO IN('G','O')),
  DATA_VALIDADE DATE NOT NULL,
  NOME VARCHAR(100),
  PRINCIPIO_ATIVO VARCHAR(100),
  COR_TARJA VARCHAR(20),
  LABORATORIO INTEGER NOT NULL,
  PRIMARY KEY (CODIGO),
  FOREIGN KEY (LABORATORIO) REFERENCES LABORATORIO(CODIGO)
);
CREATE TABLE ITEM(
  ITEM INTEGER,
  QUANTIDADE INT NOT NULL,
  PRECO NUMERIC(10,2),
  PEDIDO INTEGER,
  MEDICAMENTO INTEGER,
  PRIMARY KEY (ITEM),
  FOREIGN KEY(PEDIDO) REFERENCES PEDIDO(NUMERO),
  FOREIGN KEY(MEDICAMENTO) REFERENCES MEDICAMENTO(CODIGO)
);
